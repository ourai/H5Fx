/*!
 * Html5form v0.1.0
 * https://github.com/ourai/html5form
 *
 * Copyright 2015, 2015 Ourairyu, http://ourai.ws/
 *
 * Date: 2015-02-03
 */

!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;e={name:"H5F",version:"0.1.0"},f=/^\s*\{\{\s*([A-Z_]+)\s*\}\}\s*$/,g={ABSOLUTE_URL:/^.*$/,EMAIL:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,NUMBER:/^\d+(\.0+)?$/},b={COULD_NOT_BE_EMPTY:"COULD_NOT_BE_EMPTY",UNKNOWN_INPUT_TYPE:"UNKNOWN_INPUT_TYPE",LENGTH_SMALLER_THAN_MINIMUM:"LENGTH_SMALLER_THAN_MINIMUM",LENGTH_BIGGER_THAN_MAXIMUM:"LENGTH_BIGGER_THAN_MAXIMUM",INVALID_VALUE:"INVALID_VALUE",NOT_AN_ABSOLUTE_URL:"NOT_AN_ABSOLUTE_URL",NOT_AN_EMAIL:"NOT_AN_EMAIL",NOT_A_NUMBER:"NOT_A_NUMBER",UNDERFLOW:"UNDERFLOW",OVERFLOW:"OVERFLOW"},j=function(a){var b,c;switch(a.get(0).tagName.toLowerCase()){case"textarea":b="textarea";break;case"input":b=null!=(c=a.attr("type"))?c:"text"}return b},m=function(a){return-1!==$.inArray($(a).prop("type"),["radio","checkbox"])},l=function(a,b){return a.hasAttribute(b)},n=function(){return this.valid=!0,this.message=""},o=function(a){return parseFloat(a)},k=function(a,b){var c;return c=$(a).prop(b),$.isNumeric(c)?o(c):null},c=function(){function a(a){a=$(a),this.type=j(a),this.name=a.prop("name"),this.form=a.closest("form").get(0),m(a)?(this.element=$.makeArray($("[name='"+this.name+"']",$(this.form))),this.required=$("[name='"+this.name+"'][required]",$(this.form)).size()>0):(this.element=a.get(0),this.required=l(this.element,"required"),this.pattern=a.attr("pattern")),n.call(this)}return a.prototype.value=function(){return m(this.element)?$("[name='"+this.name+"']:checked",$(this.form)).val():$(this.element).val()},a.prototype.reset=n,a.prototype.validate=function(){var a,c,d,e,h,i,j;if(a=this.element,e=this.value(),this.required&&""===$.trim(e))this.valid=!1,this.message=b.COULD_NOT_BE_EMPTY;else switch(this.type){case"text":case"search":case"tel":case"url":case"email":case"password":case"textarea":l(a,"minlength")&&e.length<$(a).prop("minLength")?(this.valid=!1,this.message=b.LENGTH_SMALLER_THEN_MINIMUM):l(a,"maxlength")&&e.length>$(a).prop("maxLength")?(this.valid=!1,this.message=b.LENGTH_BIGGER_THEN_MAXIMUM):("url"===this.type?(this.valid=g.ABSOLUTE_URL.test(e),this.valid||(this.message=b.NOT_AN_ABSOLUTE_URL)):"email"===this.type&&(this.valid=g.EMAIL.test(e),this.valid||(this.message=b.NOT_AN_EMAIL)),this.valid&&null!=this.pattern&&""!==this.pattern&&(this.valid=(null!=(h=g[null!=(i=null!=(j=this.pattern.match(f))?j[1]:void 0)?i:""])?h:new RegExp("^"+this.pattern+"$")).test(e),this.valid||(this.message=b.INVALID_VALUE)));break;case"number":this.valid=g.NUMBER.test(e),this.valid?(d=k(a,"min"),c=k(a,"max"),null!=d&&o(e)<d?(this.valid=!1,this.message=b.UNDERFLOW):null!=c&&o(e)>c&&(this.valid=!1,this.message=b.OVERFLOW)):this.message=b.NOT_A_NUMBER;break;default:this.message=b.UNKNOWN_INPUT_TYPE}return $($.isArray(a)?a[0]:a).trigger("H5F:"+(this.valid?"valid":"invalid"),this),this.valid},a}(),p=function(a,b){return b.reset(),b.validated=!0,b.validate()?(b.counted===!0&&(a.invalidCount=--a.invalidCount),b.counted=!1):(b.counted!==!0&&(a.invalidCount=++a.invalidCount),b.counted=!0),b},h=function(a,b,c){return c===!0&&($("[name]:checkbox, [name]:radio",a).on("change",function(){return p(b,b.fields[$(this).prop("name")])}),$("[name]:not(:checkbox, :radio)",a).on("blur",function(){return p(b,b.fields[$(this).prop("name")])})),a.on("submit",function(a){return $.each(b.sequence,function(a,d){var e;return e=b.fields[d],c||(e.validated=!1),e.validated===!1&&p(b,e),!0}),b.invalidCount>0?(a.preventDefault(),a.stopImmediatePropagation()):void 0})},i={immediate:!1},d=function(){function a(a){var b;b=this,this.invalidCount=0,$("[name]:not(select, [type='hidden'])",$(a)).each(function(){var a,d;return a=$(this),d=a.prop("name"),b.addField(new c(this))})}return a.prototype.addField=function(a){var b;return null==this.fields&&(this.fields={}),null==this.sequence&&(this.sequence=[]),b=a.name,null==this.fields[b]&&(a.validated=!1,this.fields[b]=a,this.sequence.push(b)),a},a.version=e.version,a.init=function(a,b){var c;return c=this,$(a).each(function(){var a,d;return d=$(this),a="H5F-inited",b=$.extend({},i,b,{immediate:"true"===d.attr("data-h5f-immediate")}),d.data(a)!==!0&&(d.data(a,!0),d.attr("novalidate",!0),null==d.attr("data-h5f-novalidate"))?h(d,new c(this),b.immediate):void 0})},a.errors=function(a){return $.extend(b,a)},a.rules=function(a){return $.extend(g,a)},a}(),a[e.name]=d});
//# sourceMappingURL=html5form.min.map